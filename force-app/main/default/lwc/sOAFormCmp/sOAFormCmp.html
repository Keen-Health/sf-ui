<!-- <lightning-layout if:false={isModalOpen} class="slds-grid">
        <lightning-card class="slds-col button-card-style" title="Scope of Appointment (SOA)">
            <div slot="actions">
                <lightning-button variant="brand" label="Generate SOA" title="Generate SOA" onclick={onGenerateSOA}
                    class="slds-m-left_x-small">
                </lightning-button>
            </div>
        </lightning-card>
    </lightning-layout> -->
<!--Use template if:true to display/hide popup based on isModalOpen value-->
<template>
    <!-- Modal/Popup Box LWC starts here -->
    <!-- <section if:false={isLoading} role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container"> -->
    <!-- Modal/Popup Box LWC header here -->
    <!-- <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                        title="Close" onclick={closeModal}>
                        <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse"
                            size="small"></lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button> -->
    <!-- <h1 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate"> Scope of Sales
                        Appointment Confirmation Form</h1> -->
    <!-- </header> -->
    <!-- Modal/Popup Box LWC body starts here -->
    <!-- <div class="slds-modal__content slds-scrollable_y slds-p-horizontal_large slds-p-bottom_large" -->
    <div class="slds-p-around_large slds-box main-container">
        <lightning-layout class="slds-wrap slds-p-around_large">
            <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <h1 class="main-label">
                    Scope of Sales Appointment Confirmation Form
                </h1>
            </lightning-layout-item>
            <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <p>
                    The Centers for Medicare and Medicaid Services requires agents to
                    document the scope of a marketing appointment prior to any
                    face-to-face sales meeting to ensure understanding of what will be
                    discussed between the agent and the Medicare beneficiary (or their
                    authorized representative). All information provided on this form is
                    confidential and should be completed by each person with Medicare or
                    his/her authorized representative.
                </p>
            </lightning-layout-item>
            <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <h2><span title="required" class="slds-required">*</span>
                    Please check the type of product(s) you want the agent to discuss.
                    <br />(Refer below for product type descriptions)
                </h2>
                <lightning-checkbox-group name="typeOfProducts" class="checkboxClass fieldvalidate slds-p-top_small"
                    required variant="label-hidden" options={productTypeOptions} value={inputFieldData.typeOfProducts}
                    onchange={handleChange}>
                </lightning-checkbox-group>
            </lightning-layout-item>
            <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12" small-device-size="12"
                medium-device-size="4">
                <lightning-input class="fieldvalidate" required label="Member Signature:" name="memberSignature"
                    max-length="80" onchange={handleMemberSignature} value={inputFieldData.memberSignature}>
                </lightning-input>
            </lightning-layout-item>
            <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
            small-device-size="12" medium-device-size="4">
                <lightning-input class="fieldvalidate" disabled required label="Date:" name="date" type="date"
                    date-style="short" value={formatedDate} onchange={handleChange}>
                </lightning-input>
            </lightning-layout-item>
            <!-- <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <div class="slds-grid slds-wrap">
                    <label class="title-heading slds-p-right_medium">Member Signature:</label>
                    <c-signature-Panel onprogressvaluechange={handleMemberMValueChange} id="signatureMember">
                    </c-signature-Panel>
                </div>
            </lightning-layout-item> -->
            <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <p>By signing this form, you agree to a meeting with a sales agent to discuss the types of
                    products you indicated above. Please note, the person who will discuss the products is
                    either employed or contracted by a Medicare plan. They do not work directly for the
                    federal government. This individual may also be paid based on your enrollment in a plan.
                </p>
                <p class="slds-m-top_small">
                    Signing this form does NOT obligate you to enroll in a plan, affect your current
                    enrollment, or enroll you in a Medicare plan.
                </p>
            </lightning-layout-item>
            <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <h2>To be completed by Agent:</h2>
                <lightning-layout multiple-rows>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-input disabled class="fieldvalidate" required label="Agent name:" name="agentName"
                            max-length="80" onchange={handleChange} value={inputFieldData.agentName}>
                        </lightning-input>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-input class="fieldvalidate" required label="Agent phone:" name="agentPhone"
                            type="tel" disabled value={inputFieldData.agentPhone} onchange={handleChange}>
                        </lightning-input>
                    </lightning-layout-item>
                </lightning-layout>
                <lightning-layout multiple-rows>

                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-input class="fieldvalidate" required label="Beneficiary first name:"
                            name="beneficiaryFirstName" max-length="40" onchange={handleChange}
                            value={inputFieldData.beneficiaryFirstName}>
                        </lightning-input>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-input class="fieldvalidate" required label="Beneficiary last name:"
                            name="beneficiaryLastName" max-length="40" onchange={handleChange}
                            value={inputFieldData.beneficiaryLastName}>
                        </lightning-input>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-input label="Beneficiary phone:" name="beneficiaryPhone" max-length="10" type="tel"
                            pattern="[0-9]{10}$" onchange={handleChange} value={inputFieldData.beneficiaryPhone}>
                        </lightning-input>
                    </lightning-layout-item>

                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-textarea label="Street address:" name="streetAddress" max-length="100"
                            onchange={handleChange} value={inputFieldData.streetAddress}>
                        </lightning-textarea>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-textarea label="Address line 2:" name="addressLineTwo" max-length="100"
                            onchange={handleChange}>
                        </lightning-textarea>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-input label="City:" name="city" max-length="40" onchange={handleChange}
                            value={inputFieldData.city}>
                        </lightning-input>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-input label="ZIP code:" type="tel" pattern="[0-9]{5}$" max-length="5" name="zipCode"
                            message-when-pattern-mismatch="Please enter a valid zip code" onchange={handleChange}
                            value={inputFieldData.zipCode}>
                        </lightning-input>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-input label="County:" maxlength="25" type="text" name="county"
                            onchange={handleChange} value={inputFieldData.county}></lightning-input>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <!-- <lightning-input label="State:" type="text" name="state" onchange={handleChange}>
                        </lightning-input> -->
                        <lightning-combobox class="fieldvalidate" required name="state" label="State"
                            value={inputFieldData.state} placeholder="Select State/None" options={stateInputOptions}
                            onchange={handleChange}></lightning-combobox>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <p><span title="required" class="slds-required">*</span>Initial method of contact:
                            (Indicate here if beneficiary was a walk in.)
                        </p>
                        <lightning-combobox class="fieldvalidate" required name="methodOfContact" variant="label-hidden"
                            value={inputFieldData.intialMethodOfContact} placeholder="Select Method"
                            options={methodOfContactOptions}
                            onchange={handleIntialMethodOfContact}></lightning-combobox>
                        <lightning-input if:true={showOtherInputBox} class="fieldvalidate" required
                            label="Initial method of contact: Other" name="intialMethodOfContactOther" max-length="100"
                            onchange={handleChange}
                            value={inputFieldData.intialMethodOfContactOther}></lightning-input>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                        <div class="slds-grid slds-wrap">
                            <label class="slds-p-right_medium">Agent's Signature:</label>
                            <lightning-layout-item if:false={isAgentSignatureDisabled} class="slds-p-vertical_x-small">
                                <c-signature-Panel onprogressvaluechange={handleAgentValueChange} id="signatureAgent">
                                </c-signature-Panel>
                                <p class="slds-required slds-size_4-of-4" if:true={agentSignRequired}>Please sign and
                                    submit.</p>
                                <button class="slds-button slds-button_brand slds-m-top_x-small"
                                    onclick={clearSignature}>Clear Signature</button>
                            </lightning-layout-item>
                            <lightning-layout-item if:true={isAgentSignatureDisabled}>
                                <div class="slds-align_absolute-center"><b><span title="required"
                                            class="slds-required">*</span>Signature</b></div>
                                <div class="disabled-agent-signature slds-m-top_x-small">
                                    <p>
                                        Advisor can sign the form only after the member has signed it.
                                    </p>
                                </div>
                            </lightning-layout-item>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                        <p>
                            <span title="required" class="slds-required">*</span> Plan(s) the agent represented during
                            this meeting:
                        </p>
                        <lightning-radio-group name="plansByAgent" class="fieldvalidate slds-p-top_small"
                            options={plansByAgent} value={inputFieldData.plansByAgent} type="radio"
                            onchange={handlePlansInputChange} required variant="label-hidden"></lightning-radio-group>

                        <lightning-checkbox-group if:true={showPlanList} name="carrierListItems"
                            class="checkboxClass fieldvalidate slds-p-top_small" required variant="label-hidden"
                            options={carrierListOptions} value={inputFieldData.carrierListItems}
                            onchange={handleChange}></lightning-checkbox-group>

                    </lightning-layout-item>
                    <lightning-layout-item class="slds-p-vertical_small slds-p-right_medium" size="12"
                        small-device-size="12" medium-device-size="4">
                        <lightning-input label="Date of appointment completed:" name="dateOfAppointment" required
                            class="fieldvalidate" type="date" min={formatedDate} max={soaMaxDate}
                            onchange={handleChange}>
                        </lightning-input>
                    </lightning-layout-item>
                </lightning-layout>
            </lightning-layout-item>
            <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <h2>Plan Use Only</h2>

                <lightning-input class="fieldvalidate slds-p-top_small" label="Agent, if the form was signed by the beneficiary at the time of appointment, provide
                explanation why SOA was not documented prior to meeting:" name="explanation" max-length="250"
                    onchange={handleChange} value={inputFieldData.explanation}>
                </lightning-input>
                <div class="slds-p-top_small">
                    <p class="slds-align_absolute-center">
                        *Scope of Appointment documentation is subject to CMS record retention
                        requirements*
                    </p>
                    <p class="slds-align_absolute-center">
                        A Coordinated Care plan with a Medicare Advantage contract and a Medicare-approved
                        Part D sponsor
                    </p>
                </div>

            </lightning-layout-item>
            <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <h2>Stand-alone Medicare Prescription Drug Plans (Part D)</h2>
                <ul>
                    <li>
                        Medicare Prescription Drug Plan (PDP) - A stand-alone drug plan that adds
                        prescription
                        drug coverage to Original Medicare, some Medicare Cost plans, some Medicare Private
                        Fee-for-Service plans, and Medicare Medical Savings Account plans.
                    </li>
                </ul>
            </lightning-layout-item>

            <lightning-layout-item>
                <h2>Medicare Advantage Plans (Part C) and Cost Plans</h2>
                <ul>
                    <li>
                        Medicare Health Maintenance Organization (HMO) - A Medicare Advantage Plan that
                        provides all Original Medicare Part A and Part B health coverage and sometimes
                        covers Part D prescription drug coverage. In most HMOs, you can only get your care
                        from doctors or hospitals in the plan's network (except in emergencies).
                    </li>
                    <li>
                        Medicare Preferred Provider Organization (PPO) Plan - A Medicare Advantage Plan that
                        provides all Original Medicare Part A and Part B health coverage and sometimes
                        covers Part D prescription drug coverage. PPOs have network doctors and hospitals
                        but you can also use out-of-network providers, usually at a higher cost.
                    </li>
                    <li>
                        Medicare Private Fee-For-Service (PFFS) Plan - A Medicare Advantage Plan in which you may go
                        to any Medicare-approved doctor, hospital and provider that accepts the plan's
                        payment, terms and conditions and agrees to treat you - not all providers will. If
                        you join a PFFS Plan that has a network, you can see any of the network providers
                        who have agreed to always treat plan members. You will usually pay more to see out
                        of-network providers.
                    </li>
                    <li>
                        Medicare Point of Service (POS) Plan - A type of Medicare Advantage Plan available
                        in a local or regional area which combines the best feature of an HMO with an
                        out-of-network benefit. Like the HMO, members are required to designate an
                        in-network physician to be the primary health care provider. You can use doctors,
                        hospitals, and providers outside of the network for an additional cost.
                    </li>
                    <li>
                        Medicare Special Needs Plan (SNP) - A Medicare Advantage Plan that has a benefit
                        package designed for people with special health care needs. Examples of the specific
                        groups served include people who have both Medicare and Medicaid, people who reside
                        in nursing homes, and people who have certain chronic medical conditions.
                    </li>
                    <li>
                        Medicare Medical Savings Account (MSA) Plan - MSA Plans combine a high deductible
                        health plan with a bank account. The plan deposits money from Medicare into the
                        account. You can use it to pay your medical expenses until your deductible is met.
                    </li>
                    <li>
                        Medicare Cost Plan - In a Medicare Cost Plan, you can go to providers both in and
                        out of network. If you get services outside of the plan's network, your
                        Medicare-covered services will be paid for under Original Medicare but you will be
                        responsible for Medicare coinsurance and deductibles.
                    </li>
                </ul>
            </lightning-layout-item>
            <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <h2>Dental/Vision/Hearing Products</h2>
                <p>
                    Plans offering additional benefits for consumers who are looking to cover needs for
                    dental, vision or hearing. These plans are not affiliated or connected to Medicare.
                </p>
            </lightning-layout-item>
            <lightning-layout-item class="slds-p-vertical_x-small" size="12" small-device-size="12">
                <h2>Medicare Supplement (Medigap) Products</h2>
                <p>
                    Plans offering a supplemental policy to fill “gaps” in Original Medicare coverage. A
                    Medigap policy typically pays some or all of the deductible and coinsurance amounts
                    applicable to Medicare-covered services, and sometimes covers items and services that
                    are not covered by Medicare, such as care outside of the country. These plans are not
                    affiliated or connected to Medicare. </p>
            </lightning-layout-item>
        </lightning-layout>

        <!-- Modal/Popup Box LWC footer starts here -->
        <!-- <footer class="slds-modal__footer"> -->
        <div class="slds-p-around_large buttons-container">
            <lightning-button label="Delete" variant="destructive" onclick={onDelete}> </lightning-button>
            <div>
                <lightning-button label="Cancel" onclick={onCancel}> </lightning-button>
                <lightning-button label="Save" variant="brand"  class="slds-p-left_small" onclick={onSave}> </lightning-button>
                <lightning-button label="Save & Submit" variant="brand" class="slds-p-left_small" onclick={submitDetails}>
                </lightning-button>
            </div>
        </div>

    </div>

    <div if:true={isDupModal}>
        <!-- Modal/Popup Box LWC starts here -->
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">

            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                        title="Close" onclick={closeDupModal}>
                        <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse"
                            size="small"></lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2>Successfully saved SOA. Please review the below potential member matches to associate the
                        generated SOA document.
                    </h2>
                </header>

                <lightning-datatable class="slds-max-medium-table_stacked-horizontal" key-field="Id" data={dupModaldata}
                    columns={dupColumns} onrowselection={onSelectDupRow} max-row-selection="1">
                </lightning-datatable>
                <!-- Modal/Popup Box LWC footer starts here -->
                <footer class="slds-modal__footer" style="text-align: center">
                    <button disabled={disableAssociateSOABtn} class="slds-button slds-button_neutral"
                        onclick={associateSOA} title="Associate SOA">Associate SOA</button>
                    <button class="slds-button slds-button_brand" onclick={generateNewLead}
                        title="Generate new lead">Create Record</button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </div>
    <!-- </footer> -->

    <div class="spinner-container" if:true={isLoading}>

        <div class="slds-backdrop slds-backdrop_open">
            <lightning-spinner variant="brand" if:true={isLoading} alternative-text="Loading" size="large">
            </lightning-spinner>
        </div>

    </div>
    
</template>